{% extends "base.html" %}

{% block title %}Detalle de tarea{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item">
    <a href="{% url 'lista' %}">Listado</a>
</li>
<li class="breadcrumb-item active">Detalle</li>
{% endblock %}

{% block content %}
<div class="card shadow-sm p-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold">
            <i class="fa-solid fa-list-check me-2"></i>
            {{ tarea.titulo }}
        </h3>

        {% if tarea.estado == "completada" %}
            <span class="badge bg-success">
                <i class="fa-solid fa-check me-1"></i>
                Completada
            </span>
        {% else %}
            <span class="badge bg-warning text-dark">
                <i class="fa-regular fa-hourglass-half me-1"></i>
                Pendiente
            </span>
        {% endif %}
    </div>

    <p class="text-muted">{{ tarea.descripcion|default:"Sin descripción." }}</p>

    <hr>

    <div class="row mb-4">

        <div class="col-md-4">
            <label class="fw-semibold">
                <i class="fa-solid fa-flag me-1"></i> Prioridad:
            </label><br>
            {% if tarea.prioridad == "alta" %}
                <span class="badge bg-danger">
                    <i class="fa-solid fa-fire me-1"></i> Alta
                </span>
            {% elif tarea.prioridad == "media" %}
                <span class="badge bg-warning text-dark">
                    <i class="fa-solid fa-minus me-1"></i> Media
                </span>
            {% else %}
                <span class="badge bg-primary">
                    <i class="fa-solid fa-arrow-down me-1"></i> Baja
                </span>
            {% endif %}
        </div>
        <div class="col-md-4">
            <label class="fw-semibold">
                <i class="fa-solid fa-calendar-day me-1"></i> Fecha vencimiento:
            </label><br>
            {% if tarea.fecha_vencimiento %}
                {{ tarea.fecha_vencimiento|date:"d/m/Y H:i" }}
            {% else %}
                <span class="text-muted">Sin fecha</span>
            {% endif %}
        </div>

        <div class="col-md-4">
            <label class="fw-semibold"> 
                <i class="fa-solid fa-tag me-1"></i> Categoría:
            </label><br>
            {{ tarea.categoria|default:"Sin categoría" }}
        </div>
    </div>

    <div class="d-flex justify-content-end gap-2">
        <a href="{% url 'toggle_completada' tarea.id %}" class="btn btn-outline-success">
            {% if tarea.estado == "completada" %}
                <i class="fa-solid fa-rotate-lef me-1"></i> Marcar como pendiente
            {% else %}
                <i class="fa-solid fa-check me-1"></i> Marcar como completada
            {% endif %}
        </a>

        <a href="{% url 'editar' tarea.id %}" class="btn btn-primary">
            <i class="fa-solid fa-pen-to-square me-1"></i> Editar
        </a>

        <a href="{% url 'eliminar' tarea.id %}" class="btn btn-danger">
            <i class="fa-solid fa-trash me-1"></i> Eliminar
        </a>
    </div>

</div>
{% endblock %}